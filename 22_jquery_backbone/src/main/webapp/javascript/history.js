// выполняем код после полной загрузкиfunction setMenu(menuItem) {    $('li').removeClass('active');    $(menuItem).addClass('active');}$(function () {    var ProductModel  = Backbone.Model.extend({        url: function() {            return "/product/" + (this.id ? this.id : '');        }    });    var ProductsCollection = Backbone.Collection.extend({        model: ProductModel,        url: "products"    });    var products = new ProductsCollection();    var ProductsView = Backbone.View.extend({        el: $('.content'),        template: _.template($('#products').html()),        initialize: function () {            this.render();        },        render: function () {            setMenu('.products');            products.fetch({async: false});            var models = {"products": products.toJSON()};            this.$el.html(this.template(models));        }    });    var AddProductView = Backbone.View.extend({        el: $('.content'),        events: {            'click #addSbmt': 'submitForm'        },        template: _.template($('#addProduct').html()),        initialize: function () {            this.render();        },        render: function () {            setMenu('.addProduct');            this.$el.html(this.template({}));        },        submitForm: function() {            var product = new ProductModel();            product.set('name', $('#name').val());            product.set('description', $('#description').val());            product.save({async: false});            window.location.hash = 'products';        }    });    var EditProductView = Backbone.View.extend({        el: $('.content'),        events: {            'click #updateSbmt': 'submitForm'        },        template: _.template($('#editProduct').html()),        initialize: function (options) {            this.product = new ProductModel();            this.product.set('id', options.id);            this.product.fetch({async: false});            this.render();        },        render: function () {            var model = {"product": this.product.toJSON()};            this.$el.html(this.template(model));        },        submitForm: function() {            var product = new ProductModel();            product.set('id', $('#id').val());            product.set('name', $('#name').val());            product.set('description', $('#description').val());            product.save({async: false});            window.location.hash = 'products';        }    });    var MainRouter = Backbone.Router.extend({        routes: {            "": "products",            "products": "products",            "addProduct": "addProduct",            "editProduct/:id": "editProduct",            "deleteProduct/:id": "deleteProduct"        },        initialize: function () {            Backbone.history.start();        },        products: function () {            new ProductsView();        },        addProduct: function () {            new AddProductView();        },        editProduct: function (id) {            new EditProductView({id: id});        },        deleteProduct: function(id) {            var product = new ProductModel;            product.set('id', id);            product.destroy();            window.location.hash = 'products';        }    });    var mainRouter = new MainRouter();});