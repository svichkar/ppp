$(function () {  	///User Model	var UserModel  = Backbone.Model.extend({		idAttribute: "userId",        url: function() {            return "/webservices/rest/user/" + (this.id ? this.id : '');        }    });	///User Collection    var UsersCollection = Backbone.Collection.extend({        model: UserModel,        url: "/webservices/rest/user/getall"    });    var users = new UsersCollection();        ////VIEWS    var UsersView = Backbone.View.extend({        el: $('.content'),        template: _.template($('#users').html()),        initialize: function () {            this.render();        },        render: function () {            users.fetch({async: false});            var models = {"users": users.toJSON()};            this.$el.html(this.template(models));        }    });        var EditUserView = Backbone.View.extend({        el: $('.content'),        events: {            'click #updateSbmt': 'submitForm'        },        template: _.template($('#editUser').html()),        initialize: function (options) {            this.user = new UserModel();            this.user.set('userId', options.id);            this.user.fetch({async: false});            this.render();        },        render: function () {            var model = {"user": this.user.toJSON()};            this.$el.html(this.template(model));        },        submitForm: function() {            this.user.set('userId', $('#id').val());            this.user.set('userName', $('#name').val());            this.user.set('userPassword', $('#password').val());            this.user.save();            window.location.hash = 'users';        }    });        var AddUserView = Backbone.View.extend({        el: $('.content'),        events: {            'click #addSbmt': 'submitForm'        },        template: _.template($('#addUser').html()),        initialize: function () {            this.render();        },        render: function () {            this.$el.html(this.template({}));        },        submitForm: function() {           var user = new UserModel();          ///role is hardcoded as no ws for the entity was implemented           var role = {        		   roleId: 2,        		   name: "ROLE_USER"           }           ///           user.set('userName', $('#name').val());           user.set('userPassword', $('#password').val());           user.set('role', role);           user.save();           window.location.hash = 'users';        }    });        ///ROUTER    var MainRouter = Backbone.Router.extend({        routes: {            "": "users",            "users": "users",            "editUser/:id": "editUser",            "deleteUser/:id": "deleteUser",            "addUser": "addUser",        },        initialize: function () {            Backbone.history.start();        },        users: function () {            new UsersView();        },        editUser: function (id) {            new EditUserView({id: id});        },        deleteUser: function(id) {            var user = new UserModel;            user.set('userId', id);            user.destroy();            window.location.hash = 'users';        },        addUser: function () {            new AddUserView();        },    });    var mainRouter = new MainRouter();});